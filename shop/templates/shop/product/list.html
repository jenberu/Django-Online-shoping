{% extends "shop/base.html" %}
{% load static %}

{% block title %}
    {% if category %}
        {{ category.name }}
    {% else %}
        Products
    {% endif %}

{% endblock %}

{% block style %}
 <style>
#right-bar {
    width:200px;
    background-color: red;
    background-color: hsla(0, 9%, 91%, 0.76);

}
#right-bar ul{
    margin:0;
    padding:0;
}

#right-bar ul li {
    margin:0;
    list-style:none;
    padding:10px 14px;
}

#right-bar ul li a {
    display:block;
    text-decoration:none;
    list-style-type:lower-greek;
}
h1,h2{
    text-align:center;
    }
#right-bar ul li.selected {
    background:#5993bb;
    border-radius:4px;
}

#right-bar ul li.selected a {
    color:#fff;
}
 </style>
{% endblock %}


   
{% block content %}
 <form action="">
    <div class="mb-3 inline-form">
        <input type="text" name="searchProduct" class="form-control" placeholder="search for products"/>
        <button type="submit" class="btn btn-primary">Search</button>
    </div>
</form>
<div class="body-content">
 <div id="sidebar">
        <h3>Categories</h3>
        <ul>
       
        {% for c in categories %}
            <li class="category-item {% if category and category.slug == c.slug %}selected{% endif %}">
                <a href="{{ c.get_absolute_url }}">{{ c.name }}</a>
                
                {% if c.has_sub_catagory %}
                    <ul class="subcategories">
                        {% for sub in c.subcategories.all %}
                            <li class=" {% if subcategory and subcategory.slug == sub.slug %}selected{% endif %}">
                                <a href="{{ sub.get_absolute_url }}"> <span  class="subcatagorya-element" >{{ sub.name }} </span> </a>
                            </li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </li>
        {% endfor %}
    </ul>
</div>

 <div id="main" class="product-list">
    {% if search %}
    <h1> Search Result</h1>
    {% endif %}
        <h1>
            {% if category %}
                {{ category.name }}
            {% elif products%}
                Products  from {% if shop %}  {{shop.shopName}} {% else %} All registered shops {% endif %}
            {% endif %}
        </h1>
    {% if products %}
        {% for product in products %}
            <div class="item">
                <a href="{{ product.get_absolute_url }}">
                  <img src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'img/no_image.png' %}{% endif %}" width="200" height="200">
                </a>
                <a href="{{ product.get_absolute_url }}">{{ product.name }}</a>
                <br>
                {{ product.price }} Birr
                <br>
                from <a href="{% url 'shop:product_list_for_shop' product.shop.id %}">{{product.shop}}</a>
            </div>
       {% endfor %}
    {% else %}
        <h2 class="noproduct"> {% if noproduct%}  Dear <strong>{{user.username}}: </strong>{{noproduct}} {% else %}  No products avaliable {% endif %}</h2>
    {% endif %}

</div>
<div id="right-bar">
    <h3> Shops</h3>
     <ul>
     {% for sh in shops %} 
     <li class='{% if shop and shop.id == sh.id %}selected{% endif %}'>
     <a href="{% url 'shop:product_list_for_shop' sh.id %}">{{sh.shopName}}</a> from  {{sh.adress}}
     
     </li>
     {% endfor %}
     </ul>
</div>
</div>
{% endblock %}
 

