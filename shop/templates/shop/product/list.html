{% extends "shop/base.html" %}
{% load static %}

{% block title %}
    {% if category %}
        {{ category.name }}
    {% else %}
        Products
    {% endif %}

{% endblock %}
   
{% block content %}
 <form action="">
    <div class="mb-3 inline-form">
        <input type="text" name="searchProduct" class="form-control" placeholder="search for products"/>
        <button type="submit" class="btn btn-primary">Search</button>
    </div>
</form>
    <div id="sidebar">
        <h3>Categories</h3>
        <ul>
       
        {% for c in categories %}
            <li class="category-item {% if category and category.slug == c.slug %}selected{% endif %}">
                <a href="{{ c.get_absolute_url }}">{{ c.name }}</a>
                
                {% if c.has_sub_catagory %}
                    <ul class="subcategories">
                        {% for sub in c.subcategories.all %}
                            <li class=" {% if subcategory and subcategory.slug == sub.slug %}selected{% endif %}">
                                <a href="{{ sub.get_absolute_url }}"> <span  class="subcatagorya-element" >{{ sub.name }} </span> </a>
                            </li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </li>
        {% endfor %}
    </ul>
    </div>

    <div id="main" class="product-list">
    {% if search %}
    <h1> Search Result</h1>
    {% endif %}
        <h1>
            {% if category %}
                {{ category.name }}
            {% elif products%}
                Products
            {% endif %}
        </h1>
    {% if products %}
        {% for product in products %}
            <div class="item">
                <a href="{{ product.get_absolute_url }}">
                  <img src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'img/no_image.png' %}{% endif %}" width="200" height="200">
                </a>
                <a href="{{ product.get_absolute_url }}">{{ product.name }}</a>
                <br>
                {{ product.price }} Birr
                <br>
                from <a href="{% url 'shop:product_list_for_shop' product.shop.id %}">{{product.shop}}</a>
            </div>
       {% endfor %}
    {% else %}
        <h2 class="noproduct"> Dear <strong>{{user.username}}: </strong> {{noproduct}} </h2>
    {% endif %}

    </div>
{% endblock %}
 

