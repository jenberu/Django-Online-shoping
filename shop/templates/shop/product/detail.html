{% extends "shop/base.html" %}
{% load i18n static %}
{% block title %}
    {{ product.name }}
{% endblock %}
{% block style %}
<style>
 .ad-container {
            position: relative;
            width: 300px; /* Set your desired width */
            height: 250px; /* Set your desired height */
            overflow: hidden;
        }
        .add-item {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .add-item.active {
            display: block;
        }
        .ad-image {
            width: 100%;
            height: auto;
        }
.ad-description {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    padding: 10px;
    background: rgba(0, 0, 0, 0.7); /* Semi-transparent background */
    color: white;
    transform: translateY(100%);
    transition: transform 0.5s ease-in-out;
}

.add-item.active .ad-description {
    transform: translateY(0);
}

</style>
{% endblock %}
{% block content %}
<div class="product-detail">
     <div class="product-detail_body">
            <div class="product-detail_image-container">
                <div class="image-scroll">
                    <img src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'img/no_image.png' %}{% endif %}" alt="{{ product.name }}">
                </div>
            </div>
            <div class="product-detail_side-bar">
                <h1>{% translate 'Dear' %} <strong>{{ user.username }}</strong> {% translate 'Welcome to' %} <strong>{{ product.shop }}</strong></h1>
                <h1>{{ product.name }}</h1>
                <h2>
                    <a href="{{ product.category.get_absolute_url }}">
                        {{ product.category }}
                    </a>
                </h2>
                <p class="price">{{ product.price }}{% translate 'Birr' %}</p>
                <form action="{% url 'cart:cart_add' product.id %}" method="post">
                    {% csrf_token %}
                    {{ cart_product_form }}
                    <input type="submit" value="{% translate 'Add to cart' %}" style="cursor: pointer;">
                </form>
                <p>{{ product.description|linebreaks }}</p>
            </div>
          
         <diV class="product-detail_advertize">
          <h1> Adds <h1>
    <div class="ad-container">
    {% if adds %}
        {% for ad in adds %}
            <div class="add-item" id="ad-item-{{ forloop.counter }}">
                <a href="{% if ad.url %}{{ ad.url }}{% else %}# {% endif %}">
                    <img src="{% if ad.image %}{{ ad.image.url }}{% endif %}" class="ad-image" alt="Ad Image">
                    <div class="ad-description">{{ ad.description }}</div>

                </a>
                
            </div>
        {% endfor %}
    {% else %}
        <p>No advertisements available.</p>
    {% endif %}
</div>

        </diV>
    </div>


        {% if recommended_products %}
        <div class="recommendations">
            <h3>{% translate 'Poeple who bought this also bought' %}</h3>
            {% for p in recommended_products %}
            <div class="item">
                <a href="{{ p.get_absolute_url }}">
                    <img src="{% if p.image %}{{ p.image.url }}{% else %}{% static 'img/no_image.png' %}{% endif %}">
                </a>
                <p><a href="{{ p.get_absolute_url }}">{{ p.name }}</a></p>
            </div>
            {% endfor %}
        </div>
         {% endif %}
   </div>
<script>
 document.addEventListener('DOMContentLoaded', function() {
        const ads = document.querySelectorAll('.add-item');
        let currentIndex = 0;
          // Initial display of the first ad

        if (ads.length > 0) {
            ads[0].classList.add('active');
            setInterval(showNextAd, 3000); // Change ad every 3 seconds
        }

        function showNextAd() {
            ads[currentIndex].classList.remove('active');
            currentIndex = (currentIndex + 1) % ads.length;
            ads[currentIndex].classList.add('active');
        }

       
    });
</script>


{% endblock %}
